<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tabuleiro + Dado 3D + LED</title>
<style>
  :root{ --c1:#ff4444; --c2:#44aaff; --c3:#44ff66; --neon:#0ff }
  *{box-sizing:border-box}
  body{
    background: radial-gradient(circle at center, #0a0a0a, #000);
    color:#fff; font-family: "Poppins", Arial, sans-serif;
    display:flex; flex-direction:column; align-items:center; gap:22px;
    margin:0; padding:20px;
  }
  h1{ color:var(--neon); text-shadow:0 0 12px var(--neon); margin:0 }

  /* TABULEIRO */
  #board{
    display:grid; grid-template-columns:repeat(6,80px); grid-template-rows:repeat(4,80px); gap:10px;
  }
  @media (max-width:600px){
    #board{ grid-template-columns:repeat(6,60px); grid-template-rows:repeat(4,60px) }
  }
  .cell{
    background: linear-gradient(145deg,#1a1a1a,#111);
    border:2px solid #333; border-radius:10px; padding:5px;
    display:flex; align-items:center; justify-content:center; flex-wrap:wrap;
    font-size:18px; font-weight:700; color:var(--neon); transition:.2s; position:relative;
  }
  .cell:hover{ border-color:var(--neon); transform:scale(1.05) }

  .token{ width:20px; height:20px; border-radius:50%; margin:2px; transition:transform .18s ease }
  .player1{ background: #ff1a1a; box-shadow:0 0 10px #ff1a1a }
  .player2{ background: #1a7aff; box-shadow:0 0 10px #1a7aff }
  .player3{ background: #1aff5c; box-shadow:0 0 10px #1aff5c }

  /* CART√ïES + BOT√ïES */
  .controls{ display:flex; flex-wrap:wrap; gap:18px; justify-content:center }
  .player-card{
    background:#1a1a1a; border-radius:12px; width:230px; padding:14px 18px;
    text-align:center; transition:.3s; box-shadow:0 0 15px rgba(0,255,255,.2);
  }
  .player-card:hover{ transform:translateY(-4px); box-shadow:0 0 25px rgba(0,255,255,.3) }
  .player-card h3{ margin:0 0 10px; font-size:20px; text-shadow:0 0 5px currentColor }
  .p1{ color:var(--c1) } .p2{ color:var(--c2) } .p3{ color:var(--c3) }

  .input-group{ display:flex; justify-content:center; align-items:center; gap:8px }
  input[type="number"]{
    width:60px; padding:6px; border-radius:5px; border:1px solid #555;
    background:#222; color:#fff; text-align:center; font-size:15px;
  }
  button{
    background:var(--neon); color:#000; border:none; padding:8px 14px;
    font-size:15px; border-radius:6px; cursor:pointer; transition:.25s;
  }
  button:hover{ background:#00aaff; color:#fff }

  /* DADO 3D */
  .dice-area{ display:flex; flex-direction:column; align-items:center; gap:10px }
  .dice-row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:center }
  .dice-container{ perspective:600px }
  .cube{ position:relative; width:80px; height:80px; transform-style:preserve-3d; transition:transform 1s ease }
  .face{
    position:absolute; width:80px; height:80px; background:#fff; border-radius:12px;
    box-shadow:inset 0 0 15px #0004;
  }
  .dot{ position:absolute; width:14px; height:14px; background:#111; border-radius:50% }
  .face:nth-child(1){ transform: rotateY(0deg)   translateZ(40px) }    /* 1 */
  .face:nth-child(2){ transform: rotateY(90deg)  translateZ(40px) }    /* 2 */
  .face:nth-child(3){ transform: rotateY(180deg) translateZ(40px) }    /* 3 */
  .face:nth-child(4){ transform: rotateY(-90deg) translateZ(40px) }    /* 4 */
  .face:nth-child(5){ transform: rotateX(90deg)  translateZ(40px) }    /* 5 */
  .face:nth-child(6){ transform: rotateX(-90deg) translateZ(40px) }    /* 6 */

  /* pips */
  .face[data-value="1"] .dot{ top:50%; left:50%; transform:translate(-50%,-50%) }
  .face[data-value="2"] .dot:nth-child(1){ top:18px; left:18px }
  .face[data-value="2"] .dot:nth-child(2){ bottom:18px; right:18px }
  .face[data-value="3"] .dot:nth-child(1){ top:18px; left:18px }
  .face[data-value="3"] .dot:nth-child(2){ top:50%; left:50%; transform:translate(-50%,-50%) }
  .face[data-value="3"] .dot:nth-child(3){ bottom:18px; right:18px }
  .face[data-value="4"] .dot:nth-child(1){ top:18px; left:18px }
  .face[data-value="4"] .dot:nth-child(2){ top:18px; right:18px }
  .face[data-value="4"] .dot:nth-child(3){ bottom:18px; left:18px }
  .face[data-value="4"] .dot:nth-child(4){ bottom:18px; right:18px }
  .face[data-value="5"] .dot:nth-child(1){ top:18px; left:18px }
  .face[data-value="5"] .dot:nth-child(2){ top:18px; right:18px }
  .face[data-value="5"] .dot:nth-child(3){ bottom:18px; left:18px }
  .face[data-value="5"] .dot:nth-child(4){ bottom:18px; right:18px }
  .face[data-value="5"] .dot:nth-child(5){ top:50%; left:50%; transform:translate(-50%,-50%) }
  .face[data-value="6"] .dot:nth-child(1){ top:14px; left:18px }
  .face[data-value="6"] .dot:nth-child(2){ top:14px; right:18px }
  .face[data-value="6"] .dot:nth-child(3){ top:50%; left:18px; transform:translateY(-50%) }
  .face[data-value="6"] .dot:nth-child(4){ top:50%; right:18px; transform:translateY(-50%) }
  .face[data-value="6"] .dot:nth-child(5){ bottom:14px; left:18px }
  .face[data-value="6"] .dot:nth-child(6){ bottom:14px; right:18px }

  select{
    background:#222; color:var(--neon); border:1px solid var(--neon);
    padding:6px 10px; border-radius:6px; font-size:15px;
  }
  .result{ font-size:14px; color:var(--neon); opacity:.9 }

  /* POPUP DE NOMES (com fade) */
  #popup{
    position:fixed; inset:0; background:rgba(0,0,0,0.9);
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    z-index:1000; color:#fff; opacity:1; transition:opacity .35s ease;
  }
  #popup.fade-out{ opacity:0 }
  #popup h2{ color:var(--neon); text-shadow:0 0 10px var(--neon); margin-bottom:18px }
  .popup-field{ margin:8px 0; display:flex; flex-direction:column; align-items:center }
  .popup-field input{
    width:220px; padding:10px; border-radius:8px; border:none; text-align:center;
    background:#111; color:#fff; font-size:16px; outline:none; transition:color .3s;
  }
  #startBtn{ margin-top:16px }

  /* POPUP DO CAMINHO LED */
  #pathPopup{
    position:fixed; inset:0; background:rgba(0,0,0,.95);
    display:none; flex-direction:column; align-items:center; justify-content:center; z-index:2000;
  }
  #pathPopup h2{ color:var(--neon); text-shadow:0 0 10px var(--neon); margin-bottom:8px }
  .color-row{ display:flex; gap:12px; margin:10px 0 6px }
  .color-btn{
    width:42px; height:42px; border-radius:50%; border:2px solid #fff; cursor:pointer; transition:transform .2s;
  }
  .color-btn:hover{ transform:scale(1.1) }
  .color-red{ background:#ff1a1a } .color-blue{ background:#1a7aff } .color-green{ background:#1aff5c }

  .slider-container{ width:85%; max-width:720px; margin-top:14px; display:flex; flex-direction:column; gap:10px; align-items:center }
  input[type="range"]{
    -webkit-appearance:none; width:100%; height:12px; background:#222; border-radius:6px; outline:none; cursor:pointer;
  }
  input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; width:18px; height:18px; border-radius:50%;
    background:#fff; border:2px solid var(--neon);
  }
  .slider-line{
    width:100%; height:10px; background:#101010; border:1px solid #333; border-radius:6px; position:relative; overflow:hidden;
  }
  .slider-fill{
    position:absolute; inset:0 auto 0 0; width:0%; background:var(--neon);
    box-shadow:0 0 12px var(--neon); transition:width .08s linear;
  }
  .slider-value{ color:var(--neon) }
  #closePathBtn{ margin-top:10px; background:#f33; color:#fff; font-weight:700 }
</style>
</head>
<body>

<!-- POPUP DE NOMES -->
<div id="popup">
  <h2>üéÆ Digite os nomes dos jogadores</h2>
  <div class="popup-field">
    <label>Jogador 1 (Vermelho)</label>
    <input id="name1" placeholder="Nome do Jogador 1"/>
  </div>
  <div class="popup-field">
    <label>Jogador 2 (Azul)</label>
    <input id="name2" placeholder="Nome do Jogador 2"/>
  </div>
  <div class="popup-field">
    <label>Jogador 3 (Verde)</label>
    <input id="name3" placeholder="Nome do Jogador 3"/>
  </div>
  <button id="startBtn">Come√ßar o jogo</button>
</div>

<h1>üé≤ Tabuleiro com Dado 3D</h1>

<!-- TABULEIRO -->
<div id="board"></div>

<!-- DADO + CONTROLES + GUIAR LED -->
<div class="dice-area">
  <div class="dice-row">
    <div class="dice-container">
      <div class="cube" id="cube">
        <div class="face" data-value="1"><div class="dot"></div></div>
        <div class="face" data-value="2"><div class="dot"></div><div class="dot"></div></div>
        <div class="face" data-value="3"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <div class="face" data-value="4"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <div class="face" data-value="5"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <div class="face" data-value="6"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
      </div>
    </div>

    <div>
      <label for="playerSelect">Jogador:</label>
      <select id="playerSelect">
        <option value="1">Jogador 1 (Vermelho)</option>
        <option value="2">Jogador 2 (Azul)</option>
        <option value="3">Jogador 3 (Verde)</option>
      </select>
      <button id="rollBtn">üéØ Rolar Dado</button>
    </div>
  </div>

  <div class="result" id="resultText">Resultado: ‚Äî</div>
  <button id="openPathBtn">üí° Guiar Caminho do LED</button>
</div>

<!-- CART√ïES DOS JOGADORES -->
<div class="controls">
  <div class="player-card p1"><h3 id="label1">üî¥ Jogador 1</h3>
    <div class="input-group">
      <label>Casa:</label>
      <input id="p1pos" type="number" min="1" max="24" value="1">
      <button onclick="mover(1, parseInt(document.getElementById('p1pos').value,10))">Mover</button>
    </div>
  </div>
  <div class="player-card p2"><h3 id="label2">üîµ Jogador 2</h3>
    <div class="input-group">
      <label>Casa:</label>
      <input id="p2pos" type="number" min="1" max="24" value="1">
      <button onclick="mover(2, parseInt(document.getElementById('p2pos').value,10))">Mover</button>
    </div>
  </div>
  <div class="player-card p3"><h3 id="label3">üü¢ Jogador 3</h3>
    <div class="input-group">
      <label>Casa:</label>
      <input id="p3pos" type="number" min="1" max="24" value="1">
      <button onclick="mover(3, parseInt(document.getElementById('p3pos').value,10))">Mover</button>
    </div>
  </div>
</div>

<!-- POPUP DE CONTROLE DO CAMINHO LED -->
<div id="pathPopup">
  <h2>üí° Controle de Caminho do LED</h2>
  <div class="color-row">
    <button class="color-btn color-red"   data-color="var(--c1)" title="Vermelho"></button>
    <button class="color-btn color-blue"  data-color="var(--c2)" title="Azul"></button>
    <button class="color-btn color-green" data-color="var(--c3)" title="Verde"></button>
  </div>
  <div class="slider-container">
    <div class="slider-line"><div class="slider-fill" id="sliderFill"></div></div>
    <input type="range" id="pathSlider" min="0" max="100" step="0.5" value="0">
    <div class="slider-value" id="sliderValue">0 mm</div>
  </div>
  <button id="closePathBtn">Encerrar Caminho</button>
</div>

<footer style="font-size:12px;color:#aaa">Projeto escolar ‚Äî front-end pronto para futura integra√ß√£o com Arduino</footer>

<script>
  /* ======= TABULEIRO ======= */
  const board = document.getElementById('board');
  for (let i=1;i<=24;i++){
    const c=document.createElement('div'); c.className='cell'; c.id='cell'+i; c.textContent=i; board.appendChild(c);
  }
  const players = { 1:{pos:0, token:null}, 2:{pos:0, token:null}, 3:{pos:0, token:null} };

  function ajustarTokens(pos){
    const cell=document.getElementById('cell'+pos);
    const tokens=cell.querySelectorAll('.token');
    if(tokens.length===1){ tokens[0].style.transform='translate(0,0)'; }
    else if(tokens.length===2){
      tokens[0].style.transform='translate(-8px,0)'; tokens[1].style.transform='translate(8px,0)';
    }else if(tokens.length===3){
      tokens[0].style.transform='translate(-10px,-5px)';
      tokens[1].style.transform='translate(10px,-5px)';
      tokens[2].style.transform='translate(0,8px)';
    }
  }

  function placeToken(player, pos){
    if (players[player].token) players[player].token.remove();
    const t=document.createElement('div'); t.className=`token player${player}`;
    document.getElementById('cell'+pos).appendChild(t);
    players[player].token=t; players[player].pos=pos;
    ajustarTokens(pos);
  }

  // anima o caminho: vai casa por casa
  async function moverAnimado(player, destino){
    if(destino<1) destino=1;
    if(destino>24) destino=24;
    let atual = players[player].pos || 0;
    const step = (destino>atual)? 1 : -1;
    while(atual!==destino){
      atual += step;
      placeToken(player, atual);
      await new Promise(r=>setTimeout(r, 220)); // velocidade do ‚Äúcaminho‚Äù
    }
  }

  // mover direto (sem anima√ß√£o) usado nos bot√µes manuais
  function mover(player, toPos){
    if(toPos<1 || toPos>24){ alert('Escolha um n√∫mero entre 1 e 24'); return; }
    placeToken(player, toPos);
  }

  /* ======= DADO 3D + SOM ======= */
  const cube = document.getElementById('cube');
  const rollBtn = document.getElementById('rollBtn');
  const resultText = document.getElementById('resultText');
  const orientation = {1:{x:0,y:0},2:{x:0,y:-90},3:{x:0,y:-180},4:{x:0,y:90},5:{x:-90,y:0},6:{x:90,y:0}};

  let audioCtx;
  function playDiceSound(){
    // Cria um som de ‚Äúrolagem‚Äù com ru√≠do branco filtrado
    audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
    const dur = 0.7;
    const rate = audioCtx.sampleRate;
    const buffer = audioCtx.createBuffer(1, rate * dur, rate);
    const data = buffer.getChannelData(0);
    // Ru√≠do decaindo
    for(let i=0;i<data.length;i++){
      const t=i/rate;
      data[i] = (Math.random()*2-1) * (1 - t); // decaimento linear
    }
    const src = audioCtx.createBufferSource();
    src.buffer = buffer;
    const filter = audioCtx.createBiquadFilter();
    filter.type = 'bandpass';
    filter.frequency.value = 800;
    filter.Q.value = 1.2;
    const gain = audioCtx.createGain();
    gain.gain.value = 0.25;
    src.connect(filter).connect(gain).connect(audioCtx.destination);
    src.start();
  }

  rollBtn.addEventListener('click', async ()=>{
    const j = parseInt(document.getElementById('playerSelect').value,10);
    const r = Math.floor(Math.random()*6)+1;
    playDiceSound();
    const spinsX = 360*(2+Math.floor(Math.random()*3));
    const spinsY = 360*(2+Math.floor(Math.random()*3));
    const {x,y} = orientation[r];
    cube.style.transform = `rotateX(${spinsX+x}deg) rotateY(${spinsY+y}deg)`;
    resultText.textContent = 'Resultado: ‚Ä¶';
    await new Promise(res=>setTimeout(res,1000));
    resultText.textContent = `Resultado: ${r}`;
    const destino = Math.min(players[j].pos + r, 24);
    await moverAnimado(j, destino);
    // reflete nos inputs
    const input = document.getElementById(`p${j}pos`);
    if(input) input.value = destino;
  });

  /* ======= POPUP DE NOMES (cores e fade-out) ======= */
  const popup = document.getElementById('popup');
  const startBtn = document.getElementById('startBtn');
  const name1 = document.getElementById('name1');
  const name2 = document.getElementById('name2');
  const name3 = document.getElementById('name3');
  name1.addEventListener('input', ()=> name1.style.color = 'var(--c1)');
  name2.addEventListener('input', ()=> name2.style.color = 'var(--c2)');
  name3.addEventListener('input', ()=> name3.style.color = 'var(--c3)');

  startBtn.addEventListener('click', ()=>{
    const n1 = name1.value || 'Jogador 1';
    const n2 = name2.value || 'Jogador 2';
    const n3 = name3.value || 'Jogador 3';
    document.getElementById('label1').textContent = `üî¥ ${n1}`;
    document.getElementById('label2').textContent = `üîµ ${n2}`;
    document.getElementById('label3').textContent = `üü¢ ${n3}`;
    const opts = document.querySelectorAll('#playerSelect option');
    opts[0].textContent = `${n1} (Vermelho)`;
    opts[1].textContent = `${n2} (Azul)`;
    opts[2].textContent = `${n3} (Verde)`;
    // fade-out suave
    popup.classList.add('fade-out');
    setTimeout(()=> popup.style.display='none', 350);
  });

  /* ======= POPUP GUIAR LED (barra animada, cor, mil√≠metros) ======= */
  const pathPopup = document.getElementById('pathPopup');
  const openPathBtn = document.getElementById('openPathBtn');
  const closePathBtn = document.getElementById('closePathBtn');
  const pathSlider = document.getElementById('pathSlider');
  const sliderValue = document.getElementById('sliderValue');
  const sliderFill = document.getElementById('sliderFill');

  let currentLEDColor = getComputedStyle(document.documentElement).getPropertyValue('--neon').trim();

  openPathBtn.addEventListener('click', ()=>{
    pathPopup.style.display = 'flex';
    // sincroniza visual
    sliderFill.style.background = currentLEDColor;
    sliderFill.style.boxShadow = `0 0 12px ${currentLEDColor}`;
  });
  closePathBtn.addEventListener('click', ()=>{
    pathPopup.style.display = 'none';
  });

  document.querySelectorAll('.color-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      currentLEDColor = getComputedStyle(btn).backgroundColor;
      sliderFill.style.background = currentLEDColor;
      sliderFill.style.boxShadow = `0 0 12px ${currentLEDColor}`;
    });
  });

  function updateLEDBar(){
    const pct = parseFloat(pathSlider.value); // 0..100
    sliderFill.style.width = pct + '%';
    // mm exibido (ex.: 1% = 1 mm, voc√™ pode calibrar depois)
    sliderValue.textContent = `${pct.toFixed(1)} mm`;
  }
  pathSlider.addEventListener('input', updateLEDBar);
  updateLEDBar(); // estado inicial
</script>
</body>
</html>
